# Nethical Regional Configuration - EU West
# Region: eu-west-1
# Target: 200 RPS sustained, 350 concurrent agents
# Compliance: GDPR

# ============================================================================
# REGIONAL IDENTIFICATION
# ============================================================================

NETHICAL_REGION_ID=eu-west-1
NETHICAL_LOGICAL_DOMAIN=production
NETHICAL_STORAGE_DIR=/data/nethical/eu-west-1

# Data residency compliance for GDPR
NETHICAL_DATA_RESIDENCY_POLICY=EU_GDPR

# ============================================================================
# CAPACITY SETTINGS
# ============================================================================

# Target: 200 RPS sustained (contributes to 600 RPS total across 3 regions)
NETHICAL_REQUESTS_PER_SECOND=200.0
NETHICAL_MAX_PAYLOAD_BYTES=1000000

# ============================================================================
# CORE FEATURES (Always On - GDPR Enhanced)
# ============================================================================

# Quota enforcement to protect against bursts
NETHICAL_ENABLE_QUOTA=true

# OpenTelemetry for comprehensive observability
NETHICAL_ENABLE_OTEL=true

# Differential privacy mode for GDPR compliance
NETHICAL_PRIVACY_MODE=differential
NETHICAL_EPSILON=1.0

# Aggressive PII redaction for GDPR compliance
NETHICAL_REDACTION_POLICY=aggressive

# ============================================================================
# AUDIT & INTEGRITY (Medium Tier)
# ============================================================================

# Merkle anchoring for immutable audit trails (GDPR requirement)
NETHICAL_ENABLE_MERKLE=true

# Ethical taxonomy for violation categorization
NETHICAL_ENABLE_ETHICAL_TAXONOMY=true

# SLA monitoring for human-in-the-loop workflows
NETHICAL_ENABLE_SLA_MONITORING=true

# Quarantine mode for suspicious actions
NETHICAL_ENABLE_QUARANTINE=true

# Policy diff auditing for configuration changes
NETHICAL_ENABLE_POLICY_DIFF=true

# ============================================================================
# ML & ANOMALY DETECTION (Heavy Tier - Selective)
# ============================================================================

# ML shadow mode for baseline collection
NETHICAL_ENABLE_SHADOW_MODE=true

# ML blended enforcement in gray zone (0.4-0.6)
NETHICAL_ENABLE_ML_BLENDING=true

# Anomaly detection for sequence, behavioral, and drift patterns
NETHICAL_ENABLE_ANOMALY_DETECTION=true

# ============================================================================
# PERFORMANCE OPTIMIZATION
# ============================================================================

# Enable performance optimizer for risk-based gating
NETHICAL_ENABLE_PERFORMANCE_OPTIMIZATION=true

# Risk decay rate (how fast old violations are forgotten)
NETHICAL_RISK_DECAY_RATE=0.95

# ML blending weights (rule_weight + ml_weight = 1.0)
NETHICAL_RULE_WEIGHT=0.7
NETHICAL_ML_WEIGHT=0.3

# ============================================================================
# HUMAN-IN-THE-LOOP
# ============================================================================

# Auto-escalate BLOCK decisions for human review (GDPR requirement)
NETHICAL_AUTO_ESCALATE_ON_BLOCK=true

# Auto-escalate low confidence decisions
NETHICAL_AUTO_ESCALATE_ON_LOW_CONFIDENCE=true

# ============================================================================
# GDPR-SPECIFIC SETTINGS
# ============================================================================

# Enable right-to-be-forgotten (RTBF) support
NETHICAL_ENABLE_RTBF=true

# Enable data subject rights (DSR) automation
NETHICAL_ENABLE_DSR=true

# Data minimization enabled
NETHICAL_ENABLE_DATA_MINIMIZATION=true

# Privacy impact assessment logging
NETHICAL_ENABLE_PIA_LOGGING=true

# ============================================================================
# OBSERVABILITY
# ============================================================================

# OpenTelemetry configuration
OTEL_EXPORTER=otlp
OTEL_EXPORTER_OTLP_ENDPOINT=http://otel-collector:4318
OTEL_SERVICE_NAME=nethical-eu-west-1

# Service identification
OTEL_RESOURCE_ATTRIBUTES=service.version=0.1.0,deployment.environment=production,cloud.region=eu-west-1,compliance.framework=GDPR

# ============================================================================
# SHARED STATE (Redis for quota coordination)
# ============================================================================

# Redis cluster for distributed quota state (separate DB for EU)
NETHICAL_REDIS_URL=redis://redis-cluster:6379/1

# Redis connection pool settings
NETHICAL_REDIS_MAX_CONNECTIONS=50
NETHICAL_REDIS_TIMEOUT=5

# ============================================================================
# STORAGE OPTIMIZATION
# ============================================================================

# Data retention policies (GDPR compliant)
NETHICAL_HOT_STORAGE_DAYS=7
NETHICAL_WARM_STORAGE_DAYS=30
NETHICAL_COLD_STORAGE_DAYS=365

# Enable compression for archived data
NETHICAL_ENABLE_COMPRESSION=true
NETHICAL_COMPRESSION_LEVEL=6

# Enable encryption at rest (GDPR requirement)
NETHICAL_ENABLE_ENCRYPTION=true

# ============================================================================
# MONITORING & HEALTH
# ============================================================================

# Health check endpoint configuration
NETHICAL_HEALTH_CHECK_ENABLED=true
NETHICAL_HEALTH_CHECK_INTERVAL=30

# Metrics export configuration
NETHICAL_METRICS_ENABLED=true
NETHICAL_METRICS_PORT=9090

# ============================================================================
# NOTES
# ============================================================================
# 
# This configuration supports:
# - 200 RPS sustained (part of 600 RPS total)
# - ~350 concurrent agents (part of 1,000 total)
# - Full GDPR compliance (differential privacy, aggressive PII redaction)
# - Data residency enforcement (EU data stays in EU)
# - Right-to-be-forgotten (RTBF) support
# - Full audit trails with Merkle anchoring
# - Multi-region coordination via Redis
# - Comprehensive observability
#
# Hardware requirements:
# - 8 vCPU (physical cores preferred)
# - 32 GB RAM
# - 200 GB SSD (NVMe preferred)
# - 10 Gbps network
#
# Expected performance (with GDPR features):
# - p50 latency: < 60ms (differential privacy overhead)
# - p95 latency: < 250ms
# - p99 latency: < 600ms
# - CPU usage: 65-75% sustained (higher due to encryption/DP)
# - Memory usage: 22-28 GB
#
# GDPR Compliance Notes:
# - Differential privacy protects aggregated metrics
# - Aggressive PII redaction prevents data leakage
# - Merkle anchoring provides audit trail
# - RTBF enables data deletion requests
# - DSR automation supports subject access requests
