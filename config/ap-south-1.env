# Nethical Regional Configuration - Asia Pacific
# Region: ap-south-1
# Target: 150 RPS sustained, 300 concurrent agents

# ============================================================================
# REGIONAL IDENTIFICATION
# ============================================================================

NETHICAL_REGION_ID=ap-south-1
NETHICAL_LOGICAL_DOMAIN=production
NETHICAL_STORAGE_DIR=/data/nethical/ap-south-1

# ============================================================================
# CAPACITY SETTINGS
# ============================================================================

# Target: 150 RPS sustained (contributes to 550 RPS total across 3 regions)
NETHICAL_REQUESTS_PER_SECOND=150.0
NETHICAL_MAX_PAYLOAD_BYTES=1000000

# ============================================================================
# CORE FEATURES (Always On)
# ============================================================================

# Quota enforcement to protect against bursts
NETHICAL_ENABLE_QUOTA=true

# OpenTelemetry for comprehensive observability
NETHICAL_ENABLE_OTEL=true

# Standard privacy mode (basic PII detection)
NETHICAL_PRIVACY_MODE=standard
NETHICAL_REDACTION_POLICY=standard

# ============================================================================
# AUDIT & INTEGRITY (Medium Tier)
# ============================================================================

# Merkle anchoring for immutable audit trails
NETHICAL_ENABLE_MERKLE=true

# Ethical taxonomy for violation categorization
NETHICAL_ENABLE_ETHICAL_TAXONOMY=true

# SLA monitoring for human-in-the-loop workflows
NETHICAL_ENABLE_SLA_MONITORING=true

# Quarantine mode for suspicious actions
NETHICAL_ENABLE_QUARANTINE=true

# Policy diff auditing for configuration changes
NETHICAL_ENABLE_POLICY_DIFF=true

# ============================================================================
# ML & ANOMALY DETECTION (Heavy Tier - Conservative)
# ============================================================================

# ML shadow mode for baseline collection
NETHICAL_ENABLE_SHADOW_MODE=true

# ML blended enforcement disabled initially (lower traffic region)
NETHICAL_ENABLE_ML_BLENDING=false

# Anomaly detection enabled (lightweight configuration)
NETHICAL_ENABLE_ANOMALY_DETECTION=true

# Anomaly detection parameters (optimized for lower latency)
NETHICAL_ANOMALY_SEQUENCE_THRESHOLD=0.75
NETHICAL_ANOMALY_WINDOW_SIZE=3

# ============================================================================
# PERFORMANCE OPTIMIZATION
# ============================================================================

# Enable performance optimizer for risk-based gating
NETHICAL_ENABLE_PERFORMANCE_OPTIMIZATION=true

# Risk decay rate (how fast old violations are forgotten)
NETHICAL_RISK_DECAY_RATE=0.95

# ============================================================================
# HUMAN-IN-THE-LOOP
# ============================================================================

# Auto-escalate BLOCK decisions for human review
NETHICAL_AUTO_ESCALATE_ON_BLOCK=true

# Auto-escalate low confidence decisions (lower threshold for AP region)
NETHICAL_AUTO_ESCALATE_ON_LOW_CONFIDENCE=true
NETHICAL_LOW_CONFIDENCE_THRESHOLD=0.6

# ============================================================================
# OBSERVABILITY
# ============================================================================

# OpenTelemetry configuration
OTEL_EXPORTER=otlp
OTEL_EXPORTER_OTLP_ENDPOINT=http://otel-collector:4318
OTEL_SERVICE_NAME=nethical-ap-south-1

# Service identification
OTEL_RESOURCE_ATTRIBUTES=service.version=0.1.0,deployment.environment=production,cloud.region=ap-south-1

# ============================================================================
# SHARED STATE (Redis for quota coordination)
# ============================================================================

# Redis cluster for distributed quota state (separate DB for AP)
NETHICAL_REDIS_URL=redis://redis-cluster:6379/2

# Redis connection pool settings
NETHICAL_REDIS_MAX_CONNECTIONS=40
NETHICAL_REDIS_TIMEOUT=5

# ============================================================================
# STORAGE OPTIMIZATION
# ============================================================================

# Data retention policies
NETHICAL_HOT_STORAGE_DAYS=7
NETHICAL_WARM_STORAGE_DAYS=30
NETHICAL_COLD_STORAGE_DAYS=365

# Enable compression for archived data
NETHICAL_ENABLE_COMPRESSION=true
NETHICAL_COMPRESSION_LEVEL=6

# ============================================================================
# MONITORING & HEALTH
# ============================================================================

# Health check endpoint configuration
NETHICAL_HEALTH_CHECK_ENABLED=true
NETHICAL_HEALTH_CHECK_INTERVAL=30

# Metrics export configuration
NETHICAL_METRICS_ENABLED=true
NETHICAL_METRICS_PORT=9090

# ============================================================================
# NOTES
# ============================================================================
# 
# This configuration supports:
# - 150 RPS sustained (part of 550 RPS total)
# - ~300 concurrent agents (part of 1,000 total)
# - Full audit trails with Merkle anchoring
# - Multi-region coordination via Redis
# - Comprehensive observability
# - Conservative ML feature set for optimal performance
#
# Hardware requirements:
# - 8 vCPU (physical cores preferred)
# - 32 GB RAM
# - 200 GB SSD (NVMe preferred)
# - 10 Gbps network
#
# Expected performance:
# - p50 latency: < 45ms (lighter feature set)
# - p95 latency: < 180ms
# - p99 latency: < 450ms
# - CPU usage: 50-60% sustained (lower due to lighter ML)
# - Memory usage: 18-22 GB
#
# Scaling Notes:
# - This region is configured more conservatively
# - ML blending disabled to prioritize latency
# - Can be upgraded to match US/EU configuration as traffic grows
# - Ideal for initial deployment and gradual feature adoption
