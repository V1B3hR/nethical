# Migration Guide: v0.1 â†’ v1.0

## Overview
Guide for migrating from v0.1.x (alpha) to v1.0 (stable).

## Breaking Changes

### 1. Primary API
**Before** (v0.1):
```python
from nethical import SafetyGovernance
gov = SafetyGovernance()
```

**After** (v1.0):
```python
from nethical.core import IntegratedGovernance
gov = IntegratedGovernance(
    storage_dir="./nethical_data"
)
```

### 2. Quota Enforcement (New Feature)
**Added in v0.1.1**, required in v1.0:
```python
gov = IntegratedGovernance(
    enable_quota_enforcement=True,
    requests_per_second=10.0,
    max_payload_bytes=1000000
)
```

### 3. Result Structure
**Before**: Simple dict
**After**: Structured with phases
```python
result = gov.process_action(...)
# Access phase-specific results
risk = result['phase3']['risk_score']
merkle = result['phase4']['merkle']
```

## Database Migrations

### Audit Log Format
No migration needed - Merkle anchor is append-only.
Old events remain valid with new schema additions.

### Configuration Files
Update `correlation_rules.yaml` if custom rules added.
Default rules are backward compatible.

## Testing Your Migration
```bash
# Run migration validation
python -m pytest tests/ -v

# Check adversarial coverage
python -m pytest tests/adversarial/ -v
```

## Rollback Plan
If issues arise:
1. Keep v0.1 environment
2. Copy storage_dir before migration
3. Test in staging first
4. Document rollback procedure

---
Migration Support: Create GitHub issue if problems encountered
