# Supply Chain Security - Hash Verification TODO (Updated)

## Current Status
- ✅ Dependency version pinning implemented (`requirements.txt`)
- ✅ Separate hash-locked file (`requirements-hashed.txt`)
- ✅ CI workflow for drift detection & auto-sync
- ✅ Dependabot configured
- ✅ SBOM generation capability

## Pending Enhancements

### Improve Hash Lock Coverage
Current hashed lock file is auto-generated by CI using `pip-compile`. Ensure multi-platform reproducibility by always regenerating after version changes.

### SLSA Level 3 Completion
Items remaining:
1. Build provenance signing & attachment
2. Automated provenance verification step
3. Hardened build isolation & hermetic constraints
4. Dependency provenance validation tooling

## Correct Hash Generation Workflow

1. Edit versions in `requirements.txt` (no hashes inside this file).
2. Run locally (or rely on CI):
   ```bash
   python -m pip install --upgrade pip pip-tools
   pip-compile --generate-hashes --output-file requirements-hashed.txt requirements.txt
   ```
3. Commit both files together.

## Example (Do NOT put hashes in requirements.txt)
```
# requirements.txt (input)
pydantic==2.12.3
numpy==1.26.4
```

`pip-compile` will produce something like:
```
pydantic==2.12.3 \
    --hash=sha256:... \
    --hash=sha256:...
numpy==1.26.4 \
    --hash=sha256:... \
    --hash=sha256:...
```

## SLSA Steps (Planned)
- Add generator workflow for provenance (slsa-github-generator)
- Add verification job using slsa-verifier
- Enforce signed release artifacts

## References
- [pip-tools](https://github.com/jazzband/pip-tools)
- [Secure Installs](https://pip.pypa.io/en/stable/topics/secure-installs/)
- [SLSA Spec](https://slsa.dev/spec)

## Priority
Medium – Foundational mechanisms in place; enhancements increase defense depth.
